<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Arabic Practice â€“ Letters, Words & Sentences</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #f9fafb;
      --bg-panel: #ffffff;
      --border: #e5e7eb;
      --accent: #2563eb;
      --accent-soft: #dbeafe;
      --text: #111827;
      --text-soft: #4b5563;
      --radius-lg: 18px;
      --radius-md: 12px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(249, 250, 251, 0.9);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border);
    }
    .header-inner {
      max-width: 1080px;
      margin: 0 auto;
      padding: 10px 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      font-size: 1rem;
    }
    .logo-badge {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: linear-gradient(135deg, #1d4ed8, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 0.9rem;
    }
    .nav-tabs {
      display: flex;
      gap: 4px;
      padding: 2px;
      border-radius: 999px;
      background: #e5e7eb;
    }
    .nav-tab {
      border: none;
      background: transparent;
      padding: 6px 12px;
      font-size: 0.82rem;
      border-radius: 999px;
      cursor: pointer;
      color: #4b5563;
      display: flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }
    .nav-tab.active {
      background: #ffffff;
      color: #111827;
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.6);
    }

    main {
      max-width: 1080px;
      margin: 0 auto;
      padding: 10px 10px 16px;
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 8px;
      min-height: calc(100vh - 64px);
    }

    .side-panel {
      background: var(--bg-panel);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .panel-title {
      font-size: 0.9rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
    }
    .panel-subtitle {
      font-size: 0.75rem;
      color: var(--text-soft);
      margin: 0 0 6px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 6px;
    }
    .chip {
      border: 1px solid #e5e7eb;
      background: #f3f4f6;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 0.74rem;
      cursor: pointer;
      white-space: nowrap;
    }
    .chip.active {
      background: var(--accent-soft);
      color: #1d4ed8;
      border-color: #bfdbfe;
    }

    .list-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(52px, 1fr));
      gap: 6px;
      max-height: 210px;
      overflow-y: auto;
      padding: 4px 2px 2px;
    }
    .list-item {
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      padding: 6px 4px;
      text-align: center;
      font-size: 1.1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.12s ease, transform 0.06s ease,
        box-shadow 0.12s ease;
    }
    .list-item:hover {
      background: #eef2ff;
      box-shadow: 0 1px 4px rgba(148, 163, 184, 0.4);
      transform: translateY(-1px);
    }
    .list-item.small-text {
      font-size: 0.9rem;
      padding: 6px;
    }

    .word-list {
      max-height: 210px;
      overflow-y: auto;
      padding: 4px 2px 2px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .word-card {
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      padding: 6px 8px;
      font-size: 0.82rem;
      display: flex;
      flex-direction: column;
      gap: 2px;
      cursor: pointer;
      transition: background 0.12s ease, transform 0.06s ease,
        box-shadow 0.12s ease;
    }
    .word-card:hover {
      background: #eef2ff;
      box-shadow: 0 1px 4px rgba(148, 163, 184, 0.4);
      transform: translateY(-1px);
    }
    .word-main-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }
    .word-ar {
      font-size: 1.05rem;
      direction: rtl;
    }
    .word-meta {
      font-size: 0.75rem;
      color: #6b7280;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .sentence-list {
      max-height: 230px;
      overflow-y: auto;
      padding: 4px 2px 2px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .sentence-card {
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      padding: 6px 8px;
      font-size: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 3px;
      cursor: pointer;
      transition: background 0.12s ease, box-shadow 0.12s ease,
        transform 0.06s ease;
    }
    .sentence-card:hover {
      background: #eef2ff;
      box-shadow: 0 1px 4px rgba(148, 163, 184, 0.4);
      transform: translateY(-1px);
    }
    .sentence-ar {
      direction: rtl;
      font-size: 0.95rem;
    }
    .sentence-kr {
      font-size: 0.75rem;
      color: var(--text-soft);
    }

    .small-label {
      font-size: 0.72rem;
      color: #6b7280;
    }

    .form-section {
      margin-top: 6px;
      border-top: 1px dashed #e5e7eb;
      padding-top: 6px;
    }
    .form-row {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 6px;
    }
    .form-row label {
      font-size: 0.7rem;
      color: #6b7280;
    }
    .form-row input {
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      padding: 5px 7px;
      font-size: 0.78rem;
      width: 100%;
    }
    .btn-small {
      border-radius: 999px;
      border: none;
      padding: 5px 10px;
      font-size: 0.8rem;
      cursor: pointer;
      background: #111827;
      color: #f9fafb;
    }
    .btn-small.secondary {
      background: #e5e7eb;
      color: #111827;
    }

    .canvas-panel {
      display: flex;
      flex-direction: column;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      background: var(--bg-panel);
      padding: 8px 10px 10px;
      gap: 8px;
    }

    .sentence-practice {
      border-radius: 14px;
      border: 1px solid #e5e7eb;
      background: #f3f4ff;
      padding: 8px 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .sentence-practice-title {
      font-size: 0.86rem;
      font-weight: 600;
      color: #1f2937;
    }
    .sentence-practice-ar {
      direction: rtl;
      font-size: 1.15rem;
      margin-top: 2px;
    }
    .sentence-practice-kr {
      font-size: 0.8rem;
      color: #4b5563;
    }
    .sentence-practice-actions {
      margin-top: 4px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .btn-ghost {
      border-radius: 999px;
      border: 1px solid #cbd5f5;
      background: #e0ebff;
      padding: 4px 10px;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
    }

    .canvas-wrapper {
      flex: none;
      height: 240px;
      padding: 6px 8px 8px;
      border-radius: 14px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .canvas-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      font-size: 0.82rem;
      color: #374151;
    }
    canvas {
      width: 100%;
      height: 100%;
      border-radius: 12px;
      border: 1px dashed #d1d5db;
      background: #ffffff;
      touch-action: none;
    }

    .draw-actions {
      display: flex;
      justify-content: flex-end;
      margin-top: 4px;
      gap: 6px;
    }

    .record-panel {
      border-radius: 14px;
      border: 1px solid #e5e7eb;
      background: #fefce8;
      padding: 8px 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .record-title {
      font-size: 0.86rem;
      font-weight: 600;
      color: #44403c;
    }
    .record-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 2px;
      margin-bottom: 2px;
    }
    .btn-record {
      border-radius: 999px;
      border: 1px solid #f97316;
      background: #ffedd5;
      padding: 4px 10px;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      color: #9a3412;
    }
    .btn-record.stop {
      border-color: #ef4444;
      background: #fee2e2;
      color: #991b1b;
    }
    .record-hint {
      font-size: 0.72rem;
      color: #78716c;
      margin: 0;
    }

    .hidden { display: none !important; }

    @media (max-width: 960px) {
      main {
        grid-template-columns: 1fr;
        gap: 10px;
      }
      .side-panel { order: 1; }
      .canvas-panel { order: 2; }
      .canvas-wrapper { height: 220px; }
    }
    /* ììŒ ì¹´ë“œìš© í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
  .letter-card-letter {
  font-size: 1.4rem;
  margin-bottom: 2px;
}

.letter-card-sub {
  font-size: 0.65rem;
  color: #4b5563;
  line-height: 1.15;
}
    .selected-info {
  margin-bottom: 10px;
  padding: 10px 14px;
  border-radius: 10px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
}

.selected-type {
  font-size: 0.85rem;
  color: #6b7280;
  margin-bottom: 4px;
}

.selected-arabic {
  font-size: 1.5rem;
  direction: rtl;
  text-align: right;
  margin-bottom: 4px;
}

.selected-extra {
  font-size: 0.8rem;
  color: #4b5563;
}


  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="logo">
        <div class="logo-badge">Ø§</div>
        <span>Arabic Practice Lab</span>
      </div>
      <div class="nav-tabs">
        <button class="nav-tab active" data-tab="letters" onclick="setTab('letters')">
          ììŒ
        </button>
        <button class="nav-tab" data-tab="vowels" onclick="setTab('vowels')">
          ëª¨ìŒ
        </button>
        <button class="nav-tab" data-tab="words" onclick="setTab('words')">
          ë‹¨ì–´
        </button>
        <button class="nav-tab" data-tab="sentences" onclick="setTab('sentences')">
          ë¬¸ì¥
        </button>
      </div>
    </div>
  </header>

  <main>
    <!-- ì™¼ìª½ íŒ¨ë„ -->
    <aside class="side-panel">
      <!-- ììŒ íŒ¨ë„ -->
      <section id="panel-letters" class="panel-section">
        <div class="panel-title">
          <span>ì•„ëì–´ ììŒ</span>
        </div>
        <p class="panel-subtitle">ììŒì„ ëˆŒëŸ¬ ëª¨ì–‘ê³¼ ë°œìŒì„ ì—°ìŠµí•´ ë³´ì„¸ìš”.</p>
        <div class="list-grid" id="lettersList"></div>
      </section>

      <!-- ëª¨ìŒ íŒ¨ë„ -->
      <section id="panel-vowels" class="panel-section hidden">
        <div class="panel-title">
          <span>ëª¨ìŒ ê¸°í˜¸</span>
        </div>
        <p class="panel-subtitle">ì§§ì€ ëª¨ìŒ, ê¸´ ëª¨ìŒ, ìˆ˜ì¿¤ ë“±ì„ ì—°ìŠµí•´ ë³´ì„¸ìš”.</p>
        <div class="list-grid" id="vowelsList"></div>
      </section>

      <!-- ë‹¨ì–´ íŒ¨ë„ -->
      <section id="panel-words" class="panel-section hidden">
        <div class="panel-title">
          <span>ë‹¨ì–´ ì—°ìŠµ</span>
        </div>
        <p class="panel-subtitle">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ê³  ë‹¨ì–´ë¥¼ ê³¨ë¼ ì¨ ë³´ì„¸ìš”.</p>
        <div class="chip-row" id="wordCategoryChips"></div>
        <div class="word-list" id="wordList"></div>

        <div class="form-section">
          <div class="panel-title">
            <span>ë‚´ ë‹¨ì–´ ì¶”ê°€</span>
          </div>
          <div class="form-row">
            <label>ì•„ëì–´ ë‹¨ì–´</label>
            <input id="customWordArabic" placeholder="ì˜ˆ: Ù‚ÙÙ‡Ù’ÙˆÙØ©ÙŒ" />
          </div>
          <div class="form-row">
            <label>í•œêµ­ì–´ ëœ»</label>
            <input id="customWordKorean" placeholder="ì˜ˆ: ì»¤í”¼" />
          </div>
          <div class="form-row">
            <label>ë°œìŒ(ì„ íƒ)</label>
            <input id="customWordRoman" placeholder="ì˜ˆ: qahwa" />
          </div>
          <button class="btn-small" onclick="addCustomWord()">ì»¤ìŠ¤í…€ ë‹¨ì–´ ì €ì¥</button>
          <p class="record-hint">ì¶”ê°€í•œ ë‹¨ì–´ëŠ” â€˜ì»¤ìŠ¤í…€â€™ ì¹´í…Œê³ ë¦¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.</p>
        </div>
      </section>

      <!-- ë¬¸ì¥ íŒ¨ë„ -->
      <section id="panel-sentences" class="panel-section hidden">
        <div class="panel-title">
          <span>ë¬¸ì¥ í•™ìŠµ</span>
        </div>
        <p class="panel-subtitle">ì¼ìƒ íšŒí™” ë¬¸ì¥ì„ ê³ ë¥´ê³ , ë“£ê³ Â·ì“°ê³ Â·ë§í•´ ë³´ì„¸ìš”.</p>

        <div class="chip-row" id="sentenceCategoryChips"></div>
        <div class="sentence-list" id="sentenceList"></div>
      </section>
    </aside>

    <!-- ì˜¤ë¥¸ìª½: ë°œìŒ ì—°ìŠµ + ë¬¸ì¥/ìº”ë²„ìŠ¤ -->
    <section class="canvas-panel">
      <!-- ë‚´ ë°œìŒ ì—°ìŠµ: ì“°ê¸°ë³´ë‹¤ ìœ„ë¡œ ì´ë™ -->
      <div id="recordPanel" class="record-panel hidden">
        <div class="record-title">ë‚´ ë°œìŒ ì—°ìŠµ</div>
        <p class="record-hint">
          ì„ íƒí•œ ë¬¸ì¥ì„ ë³´ê³  ìŠ¤ìŠ¤ë¡œ ì½ì–´ ë³¸ ë’¤, ë…¹ìŒí•´ì„œ ë‹¤ì‹œ ë“¤ì–´ë³´ì„¸ìš”.
        </p>
        <div class="record-controls">
          <button class="btn-record" type="button" onclick="startRecording()">
            ğŸ¤ ë…¹ìŒ ì‹œì‘
          </button>
          <button class="btn-record stop" type="button" onclick="stopRecording()">
            â¹ ì •ì§€
          </button>
        </div>
        <audio id="myPronunciationAudio" controls></audio>
        <p class="record-hint">
          * ë¸Œë¼ìš°ì €ì—ì„œ ë§ˆì´í¬ ì‚¬ìš© í—ˆìš©ì´ í•„ìš”í•´ìš”. (ì•„ì´íŒ¨ë“œë„ ì§€ì›ë©ë‹ˆë‹¤.)
        </p>
      </div>

      <!-- ì„ íƒ ë¬¸ì¥ í‘œì‹œ -->
      <div id="sentencePracticeBox" class="sentence-practice hidden">
        <div class="sentence-practice-title">ì„ íƒí•œ ë¬¸ì¥</div>
        <div id="practiceSentenceAr" class="sentence-practice-ar"></div>
        <div id="practiceSentenceKr" class="sentence-practice-kr"></div>
        <div class="sentence-practice-actions">
          <button class="btn-ghost" type="button" onclick="playCurrentSentence()">
            ğŸ”Š ë¬¸ì¥ ë°œìŒ ë“£ê¸°
          </button>
          <button class="btn-ghost" type="button" onclick="scrollToTraceCanvas()">
            âœï¸ ì´ ë¬¸ì¥ ë”°ë¼ ì“°ê¸°
          </button>
        </div>
      </div>

<!-- ì—°ìŠµ ì˜ì—­ (ì„ íƒí•œ í•­ëª© + ë”°ë¼ ì“°ê¸° + ì§ì ‘ ì“°ê¸°) -->
<div class="practice-area">

  <!-- ğŸ”¹ ì„ íƒí•œ í•­ëª© ì •ë³´ ë°•ìŠ¤ -->
  <div id="selectedInfo" class="selected-info">
    <div id="selectedType" class="selected-type">
      ì—°ìŠµí•  ììŒ / ëª¨ìŒ / ë‹¨ì–´ / ë¬¸ì¥ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.
    </div>
    <div id="selectedArabic" class="selected-arabic"></div>
    <div id="selectedExtra" class="selected-extra"></div>
  </div>

  <!-- ğŸ”¹ 1. ë”°ë¼ ì“°ê¸° -->
  <div class="canvas-block">
    <div class="canvas-header">
      <span>1. ë”°ë¼ ì“°ê¸°</span>
      <div class="canvas-controls">
        <label for="traceWidth">ì„  ë‘ê»˜</label>
        <input id="traceWidth" type="range" min="1" max="20" value="6" />
        <button id="traceClear" type="button">ì§€ìš°ê¸°</button>
      </div>
    </div>
    <canvas id="traceCanvas"></canvas>
  </div>

  <!-- ğŸ”¹ 2. ì§ì ‘ ì“°ê¸° -->
  <div class="canvas-block">
    <div class="canvas-header">
      <span>2. ì§ì ‘ ì¨ ë³´ê¸°</span>
      <div class="canvas-controls">
        <label for="freeWidth">ì„  ë‘ê»˜</label>
        <input id="freeWidth" type="range" min="1" max="20" value="6" />
        <button id="freeClear" type="button">ì§€ìš°ê¸°</button>
      </div>
    </div>
    <canvas id="freeCanvas"></canvas>
  </div>

</div>

    </section>
  </main>

  <script>
    // ====== ê¸°ë³¸ ë°ì´í„° ======

   const consonants = [
  { char: "Ø§", name: "alif", sound: "a / Ä" },
  { char: "Ø¨", name: "bÄÊ¼", sound: "b" },
  { char: "Øª", name: "tÄÊ¼", sound: "t" },
  { char: "Ø«", name: "thÄÊ¼", sound: "th" },
  { char: "Ø¬", name: "jÄ«m", sound: "j" },
  { char: "Ø­", name: "á¸¥ÄÊ¼", sound: "á¸¥" },
  { char: "Ø®", name: "khÄÊ¼", sound: "kh" },
  { char: "Ø¯", name: "dÄl", sound: "d" },
  { char: "Ø°", name: "dhÄl", sound: "dh" },
  { char: "Ø±", name: "rÄÊ¼", sound: "r" },
  { char: "Ø²", name: "zÄy", sound: "z" },
  { char: "Ø³", name: "sÄ«n", sound: "s" },
  { char: "Ø´", name: "shÄ«n", sound: "sh" },
  { char: "Øµ", name: "á¹£Äd", sound: "á¹£" },
  { char: "Ø¶", name: "á¸Äd", sound: "á¸" },
  { char: "Ø·", name: "á¹­ÄÊ¼", sound: "á¹­" },
  { char: "Ø¸", name: "áº“ÄÊ¼", sound: "áº“" },
  { char: "Ø¹", name: "Ê¿ayn", sound: "Ê¿" },
  { char: "Øº", name: "ghayn", sound: "gh" },
  { char: "Ù", name: "fÄÊ¼", sound: "f" },
  { char: "Ù‚", name: "qÄf", sound: "q" },
  { char: "Ùƒ", name: "kÄf", sound: "k" },
  { char: "Ù„", name: "lÄm", sound: "l" },
  { char: "Ù…", name: "mÄ«m", sound: "m" },
  { char: "Ù†", name: "nÅ«n", sound: "n" },
  { char: "Ù‡", name: "hÄÊ¼", sound: "h" },
  { char: "Ùˆ", name: "wÄw", sound: "w" },
  { char: "ÙŠ", name: "yÄÊ¼", sound: "y" }
];

    const vowels = [
      { mark: "Ù", name: "íŒŒíƒ€í•˜", desc: "a (ì§§ì€ a ì†Œë¦¬)" },
      { mark: "Ù", name: "ì¹´ìŠ¤ë¼", desc: "i (ì§§ì€ i ì†Œë¦¬)" },
      { mark: "Ù", name: "ë‹´ë§ˆ", desc: "u (ì§§ì€ u ì†Œë¦¬)" },
      { mark: "Ù‹", name: "íƒ„ìœˆ íŒŒíƒ€í•˜", desc: "an" },
      { mark: "Ù", name: "íƒ„ìœˆ ì¹´ìŠ¤ë¼", desc: "in" },
      { mark: "ÙŒ", name: "íƒ„ìœˆ ë‹´ë§ˆ", desc: "un" },
      { mark: "Ù’", name: "ìˆ˜ì¿¤", desc: "ììŒë§Œ ë°œìŒ" },
      { mark: "Ø§", name: "ì•Œë¦¬í”„", desc: "ê¸´ a" },
      { mark: "Ùˆ", name: "ì™€ìš° (ëª¨ìŒ)", desc: "ê¸´ u" },
      { mark: "ÙŠ", name: "ì•¼ (ëª¨ìŒ)", desc: "ê¸´ i" }
    ];

    // === ë‹¨ì–´ ë°ì´í„° ===
    const baseWords = [
      /* ìƒ‰ê¹” */
      { letter: "Ø£ÙØ­Ù’Ù…ÙØ±Ù", name: "Ê¾aá¸¥mar", korean: "ë¹¨ê°„ìƒ‰", roman: "aá¸¥mar", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø£ÙØ²Ù’Ø±ÙÙ‚Ù", name: "Ê¾azraq", korean: "íŒŒë€ìƒ‰", roman: "azraq", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø£ÙØ®Ù’Ø¶ÙØ±Ù", name: "Ê¾akhá¸ar", korean: "ì´ˆë¡ìƒ‰", roman: "akhá¸ar", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø£ÙØµÙ’ÙÙØ±Ù", name: "Ê¾aá¹£far", korean: "ë…¸ë€ìƒ‰", roman: "aá¹£far", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø£ÙØ¨Ù’ÙŠÙØ¶Ù", name: "Ê¾abyaá¸", korean: "í•˜ì–€ìƒ‰", roman: "abyaá¸", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø£ÙØ³Ù’ÙˆÙØ¯Ù", name: "Ê¾aswad", korean: "ê²€ì€ìƒ‰", roman: "aswad", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø¨ÙÙ†ÙÙ‘ÙŠÙŒÙ‘", name: "bunnÄ«yy", korean: "ê°ˆìƒ‰", roman: "bunniyy", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø¨ÙÙ†ÙÙÙ’Ø³ÙØ¬ÙÙŠÙŒÙ‘", name: "banafsajiyy", korean: "ë³´ë¼ìƒ‰", roman: "banafsajiyy", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø¨ÙØ±Ù’ØªÙÙ‚ÙØ§Ù„ÙÙŠÙŒÙ‘", name: "burtuqÄliyy", korean: "ì£¼í™©ìƒ‰", roman: "burtuqÄliyy", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø±ÙÙ…ÙØ§Ø¯ÙÙŠÙŒÙ‘", name: "ramÄdiyy", korean: "íšŒìƒ‰", roman: "ramÄdiyy", kind: "ë‹¨ì–´", category: "color" },
      { letter: "ÙˆÙØ±Ù’Ø¯ÙÙŠÙŒÙ‘", name: "wardiyy", korean: "ë¶„í™ìƒ‰", roman: "wardiyy", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø°ÙÙ‡ÙØ¨ÙÙŠÙŒÙ‘", name: "dhahabiyy", korean: "ê¸ˆìƒ‰", roman: "dhahabiyy", kind: "ë‹¨ì–´", category: "color" },
      { letter: "ÙÙØ¶ÙÙ‘ÙŠÙŒÙ‘", name: "fiá¸á¸iyy", korean: "ì€ìƒ‰", roman: "fiá¸á¸iyy", kind: "ë‹¨ì–´", category: "color" },
      { letter: "Ø³ÙÙ…ÙØ§ÙˆÙÙŠÙŒÙ‘", name: "samÄwiyy", korean: "í•˜ëŠ˜ìƒ‰", roman: "samÄwiyy", kind: "ë‹¨ì–´", category: "color" },
      { letter: "ÙƒÙØ­Ù’Ù„ÙÙŠÙŒÙ‘", name: "kuá¸¥liyy", korean: "ë„¤ì´ë¹„ìƒ‰", roman: "kuá¸¥liyy", kind: "ë‹¨ì–´", category: "color" },

      /* ë‚ ì”¨ */
      { letter: "Ù…ÙØ·ÙØ±ÙŒ", name: "maá¹­ar", korean: "ë¹„", roman: "maá¹­ar", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø«ÙÙ„Ù’Ø¬ÙŒ", name: "thalj", korean: "ëˆˆ", roman: "thalj", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø±ÙÙŠØ­ÙŒ", name: "rÄ«á¸¥", korean: "ë°”ëŒ", roman: "rÄ«á¸¥", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø¬ÙÙˆÙŒÙ‘ Ø­ÙØ§Ø±ÙŒÙ‘", name: "jaww á¸¥Ärr", korean: "ë”ìš´ ë‚ ì”¨", roman: "jaww á¸¥Ärr", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø¬ÙÙˆÙŒÙ‘ Ø¨ÙØ§Ø±ÙØ¯ÙŒ", name: "jaww bÄrid", korean: "ì¶”ìš´ ë‚ ì”¨", roman: "jaww bÄrid", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "ØºÙØ§Ø¦ÙÙ…ÙŒ", name: "ghÄÊ¾im", korean: "íë¦° ë‚ ì”¨", roman: "ghÄÊ¾im", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ù…ÙØ´Ù’Ù…ÙØ³ÙŒ", name: "mushmis", korean: "ë§‘ê³  í–‡ë¹›ì´ ê°•í•¨", roman: "mushmis", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø±ÙØ·Ù’Ø¨ÙŒ", name: "raá¹­b", korean: "ìŠµí•œ ë‚ ì”¨", roman: "raá¹­b", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø¬ÙØ§ÙÙŒÙ‘", name: "jÄff", korean: "ê±´ì¡°í•œ ë‚ ì”¨", roman: "jÄff", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø¶ÙØ¨ÙØ§Ø¨ÙŒ", name: "á¸abÄb", korean: "ì•ˆê°œ", roman: "á¸abÄb", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø¹ÙØ§ØµÙÙÙŒ", name: "Ê¿Äá¹£if", korean: "ë°”ëŒì´ ê°•í•œ", roman: "Ê¿Äá¹£if", kind: "ë‹¨ì–´", category: "weather" },
      { letter: "Ø¹ÙØ§ØµÙÙÙØ©ÙŒ Ø±ÙØ¹Ù’Ø¯ÙÙŠÙÙ‘Ø©ÙŒ", name: "Ê¿Äá¹£ifa raÊ¿diyya", korean: "ë‡Œìš°, ì²œë‘¥ ë²ˆê°œ", roman: "Ê¿Äá¹£ifa raÊ¿diyya", kind: "ë‹¨ì–´", category: "weather" },

      /* ê³¼ì¼ */
      { letter: "ØªÙÙÙÙ‘Ø§Ø­ÙØ©ÙŒ", name: "tuffÄá¸¥a", korean: "ì‚¬ê³¼", roman: "tuffÄá¸¥a", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ù…ÙÙˆÙ’Ø²ÙØ©ÙŒ", name: "mawza", korean: "ë°”ë‚˜ë‚˜", roman: "mawza", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ø¹ÙÙ†ÙØ¨ÙŒ", name: "Ê¿inab", korean: "í¬ë„", roman: "Ê¿inab", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ø¨ÙØ±Ù’ØªÙÙ‚ÙØ§Ù„ÙØ©ÙŒ", name: "burtuqÄla", korean: "ì˜¤ë Œì§€", roman: "burtuqÄla", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "ÙÙØ±ÙØ§ÙˆÙÙ„ÙØ©ÙŒ", name: "farÄwla", korean: "ë”¸ê¸°", roman: "farÄwla", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ù…ÙÙ†Ù’Ø¬ÙÙˆ", name: "mangÅ«", korean: "ë§ê³ ", roman: "mango", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ø¨ÙØ·ÙÙ‘ÙŠØ®ÙŒ", name: "biá¹­á¹­Ä«kh", korean: "ìˆ˜ë°•", roman: "biá¹­á¹­Ä«kh", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ø´ÙÙ…ÙØ§Ù…ÙŒ", name: "shimÄm", korean: "ë©œë¡ ", roman: "shimÄm", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ø£ÙÙ†ÙØ§Ù†ÙØ§Ø³ÙŒ", name: "Ê¾anÄnÄs", korean: "íŒŒì¸ì• í”Œ", roman: "ananas", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ù„ÙÙŠÙ’Ù…ÙÙˆÙ†ÙŒ", name: "laymÅ«n", korean: "ë ˆëª¬", roman: "laymÅ«n", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "ÙƒÙÙŠÙ’ÙˆÙÙŠ", name: "kÄ«wÄ«", korean: "í‚¤ìœ„", roman: "kiwi", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ø±ÙÙ…ÙÙ‘Ø§Ù†ÙŒ", name: "rummÄn", korean: "ì„ë¥˜", roman: "rummÄn", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ø®ÙÙˆÙ’Ø®ÙŒ", name: "khawkh", korean: "ë³µìˆ­ì•„", roman: "khawkh", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "ÙƒÙÙ…ÙÙ‘Ø«Ù’Ø±ÙÙ‰", name: "kummathrÄ", korean: "ë°°(ì„œì–‘ë°°)", roman: "kummathrÄ", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "ØªÙÙˆØªÙŒ", name: "tÅ«t", korean: "ë² ë¦¬, ì‚°ë”¸ê¸°", roman: "tÅ«t", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "ØªÙÙŠÙ†ÙŒ", name: "tÄ«n", korean: "ë¬´í™”ê³¼", roman: "tÄ«n", kind: "ë‹¨ì–´", category: "fruit" },
      { letter: "Ù…ÙØ´Ù’Ù…ÙØ´ÙŒ", name: "mishmish", korean: "ì‚´êµ¬", roman: "mishmish", kind: "ë‹¨ì–´", category: "fruit" },

      /* ì•¼ì±„ */
      { letter: "Ø¬ÙØ²ÙØ±ÙŒ", name: "jazar", korean: "ë‹¹ê·¼", roman: "jazar", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø¨ÙØ·ÙØ§Ø·ÙØ³Ù", name: "baá¹­Äá¹­is", korean: "ê°ì", roman: "baá¹­Äá¹­is", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø·ÙÙ…ÙØ§Ø·ÙÙ…Ù", name: "á¹­amÄá¹­im", korean: "í† ë§ˆí† ", roman: "á¹­amÄá¹­im", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø¨ÙØµÙÙ„ÙŒ", name: "baá¹£al", korean: "ì–‘íŒŒ", roman: "baá¹£al", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø®ÙÙŠÙØ§Ø±ÙŒ", name: "khiyÄr", korean: "ì˜¤ì´", roman: "khiyÄr", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "ÙÙÙ„Ù’ÙÙÙ„ÙŒ", name: "filfil", korean: "ê³ ì¶”, í”¼ë§", roman: "filfil", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "ÙƒÙØ±ÙÙ†Ù’Ø¨ÙŒ", name: "kurunb", korean: "ì–‘ë°°ì¶”", roman: "kurunb", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø®ÙØ³ÙŒÙ‘", name: "khass", korean: "ìƒì¶”, ì–‘ìƒì¶”", roman: "khass", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø³ÙØ¨ÙØ§Ù†ÙØ®Ù", name: "sabÄnikh", korean: "ì‹œê¸ˆì¹˜", roman: "sabÄnikh", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø¨ÙØ§Ø°ÙÙ†Ù’Ø¬ÙØ§Ù†ÙŒ", name: "bÄdhinjÄn", korean: "ê°€ì§€", roman: "bÄdhinjÄn", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø«ÙÙˆÙ’Ù…ÙŒ", name: "thawm", korean: "ë§ˆëŠ˜", roman: "thawm", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "Ø²ÙÙ†Ù’Ø¬ÙØ¨ÙÙŠÙ„ÙŒ", name: "zanjabÄ«l", korean: "ìƒê°•", roman: "zanjabÄ«l", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "ÙÙØ·Ù’Ø±ÙŒ", name: "fuá¹­r", korean: "ë²„ì„¯", roman: "fuá¹­r", kind: "ë‹¨ì–´", category: "vegetable" },
      { letter: "ÙÙØ§ØµÙÙˆÙ„Ù’ÙŠÙØ§", name: "fÄá¹£Å«lyÄ", korean: "ê°•ë‚­ì½©", roman: "fÄá¹£Å«lyÄ", kind: "ë‹¨ì–´", category: "vegetable" },

      /* êµí†µìˆ˜ë‹¨ */
      { letter: "Ø³ÙÙŠÙÙ‘Ø§Ø±ÙØ©ÙŒ", name: "sayyÄra", korean: "ìë™ì°¨", roman: "sayyÄra", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ø­ÙØ§ÙÙÙ„ÙØ©ÙŒ", name: "á¸¥Äfila", korean: "ë²„ìŠ¤", roman: "á¸¥Äfila", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ø­ÙØ§ÙÙÙ„ÙØ©ÙŒ ØµÙØºÙÙŠØ±ÙØ©ÙŒ", name: "á¸¥Äfila á¹£aghÄ«ra", korean: "ë¯¸ë‹ˆë²„ìŠ¤", roman: "á¸¥Äfila á¹£aghÄ«ra", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ù‚ÙØ·ÙØ§Ø±ÙŒ", name: "qiá¹­Är", korean: "ê¸°ì°¨", roman: "qiá¹­Är", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ù‚ÙØ·ÙØ§Ø±ÙŒ Ø³ÙØ±ÙÙŠØ¹ÙŒ", name: "qiá¹­Är sarÄ«Ê¿", korean: "ê³ ì†ì—´ì°¨", roman: "qiá¹­Är sarÄ«Ê¿", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ù…ÙØªÙ’Ø±ÙÙˆ", name: "mitrÅ«", korean: "ì§€í•˜ì² ", roman: "mitrÅ«", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ø·ÙØ§Ø¦ÙØ±ÙØ©ÙŒ", name: "á¹­ÄÊ¾ira", korean: "ë¹„í–‰ê¸°", roman: "á¹­ÄÊ¾ira", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ø³ÙÙÙÙŠÙ†ÙØ©ÙŒ", name: "safÄ«na", korean: "ë°°", roman: "safÄ«na", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ù‚ÙØ§Ø±ÙØ¨ÙŒ", name: "qÄrib", korean: "ë³´íŠ¸", roman: "qÄrib", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ø¯ÙØ±ÙÙ‘Ø§Ø¬ÙØ©ÙŒ", name: "darrÄja", korean: "ìì „ê±°", roman: "darrÄja", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ø¯ÙØ±ÙÙ‘Ø§Ø¬ÙØ©ÙŒ Ù†ÙØ§Ø±ÙÙŠÙÙ‘Ø©ÙŒ", name: "darrÄja nÄriyya", korean: "ì˜¤í† ë°”ì´", roman: "darrÄja nÄriyya", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ø³ÙÙŠÙÙ‘Ø§Ø±ÙØ©Ù Ø£ÙØ¬Ù’Ø±ÙØ©Ù", name: "sayyÄrat Ê¾ujra", korean: "íƒì‹œ", roman: "sayyÄrat Ê¾ujra", kind: "ë‹¨ì–´", category: "transport" },
      { letter: "Ø´ÙØ§Ø­ÙÙ†ÙØ©ÙŒ", name: "shÄá¸¥ina", korean: "íŠ¸ëŸ­", roman: "shÄá¸¥ina", kind: "ë‹¨ì–´", category: "transport" },

      /* ë™ë¬¼ */
      { letter: "Ù‚ÙØ·ÙÙ‘Ø©ÙŒ", name: "qiá¹­á¹­a", korean: "ê³ ì–‘ì´", roman: "qiá¹­á¹­a", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "ÙƒÙÙ„Ù’Ø¨ÙŒ", name: "kalb", korean: "ê°œ", roman: "kalb", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ø­ÙØµÙØ§Ù†ÙŒ", name: "á¸¥iá¹£Än", korean: "ë§", roman: "á¸¥iá¹£Än", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ø¨ÙÙ‚ÙØ±ÙØ©ÙŒ", name: "baqara", korean: "ì†Œ", roman: "baqara", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "ØºÙÙ†ÙÙ…ÙŒ", name: "ghanam", korean: "ì–‘", roman: "ghanam", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ø³ÙÙ…ÙÙƒÙØ©ÙŒ", name: "samaka", korean: "ë¬¼ê³ ê¸°", roman: "samaka", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ø·ÙØ§Ø¦ÙØ±ÙŒ", name: "á¹­ÄÊ¾ir", korean: "ìƒˆ", roman: "á¹­ÄÊ¾ir", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ø£ÙØ³ÙØ¯ÙŒ", name: "Ê¾asad", korean: "ì‚¬ì", roman: "Ê¾asad", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ù†ÙÙ…ÙØ±ÙŒ", name: "namir", korean: "í˜¸ë‘ì´/í‘œë²”", roman: "namir", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "ÙÙÙŠÙ„ÙŒ", name: "fÄ«l", korean: "ì½”ë¼ë¦¬", roman: "fÄ«l", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ø¯ÙØ¨ÙŒÙ‘", name: "dubb", korean: "ê³°", roman: "dubb", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ø£ÙØ±Ù’Ù†ÙØ¨ÙŒ", name: "Ê¾arnab", korean: "í† ë¼", roman: "Ê¾arnab", kind: "ë‹¨ì–´", category: "animal" },
      { letter: "Ù‚ÙØ±Ù’Ø¯ÙŒ", name: "qird", korean: "ì›ìˆ­ì´", roman: "qird", kind: "ë‹¨ì–´", category: "animal" },

      /* ê°€ì¡± */
      { letter: "Ø£ÙÙ…ÙŒÙ‘", name: "Ê¾umm", korean: "ì—„ë§ˆ", roman: "Ê¾umm", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø£ÙØ¨ÙŒ", name: "Ê¾ab", korean: "ì•„ë¹ ", roman: "Ê¾ab", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø£ÙØ®ÙŒ", name: "Ê¾akh", korean: "í˜•/ì˜¤ë¹ /ë‚¨ë™ìƒ", roman: "Ê¾akh", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø£ÙØ®Ù’ØªÙŒ", name: "Ê¾ukht", korean: "ëˆ„ë‚˜/ì–¸ë‹ˆ/ì—¬ë™ìƒ", roman: "Ê¾ukht", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø¬ÙØ¯ÙŒÙ‘", name: "jadd", korean: "í• ì•„ë²„ì§€", roman: "jadd", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø¬ÙØ¯ÙÙ‘Ø©ÙŒ", name: "jadda", korean: "í• ë¨¸ë‹ˆ", roman: "jadda", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø§ÙØ¨Ù’Ù†ÙŒ", name: "ibn", korean: "ì•„ë“¤", roman: "ibn", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø§ÙØ¨Ù’Ù†ÙØ©ÙŒ", name: "ibna", korean: "ë”¸", roman: "ibna", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø¹ÙÙ…ÙŒÙ‘", name: "Ê¿amm", korean: "ì‚¼ì´Œ(ì•„ë²„ì§€ ìª½)", roman: "Ê¿amm", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø¹ÙÙ…ÙÙ‘Ø©ÙŒ", name: "Ê¿amma", korean: "ê³ ëª¨", roman: "Ê¿amma", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø®ÙØ§Ù„ÙŒ", name: "khÄl", korean: "ì™¸ì‚¼ì´Œ", roman: "khÄl", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø®ÙØ§Ù„ÙØ©ÙŒ", name: "khÄla", korean: "ì´ëª¨", roman: "khÄla", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø²ÙÙˆÙ’Ø¬ÙŒ", name: "zawj", korean: "ë‚¨í¸", roman: "zawj", kind: "ë‹¨ì–´", category: "family" },
      { letter: "Ø²ÙÙˆÙ’Ø¬ÙØ©ÙŒ", name: "zawja", korean: "ì•„ë‚´", roman: "zawja", kind: "ë‹¨ì–´", category: "family" },
      { letter: "ØµÙØ¯ÙÙŠÙ‚ÙŒ", name: "á¹£adÄ«q", korean: "ì¹œêµ¬(ë‚¨)", roman: "á¹£adÄ«q", kind: "ë‹¨ì–´", category: "family" },
      { letter: "ØµÙØ¯ÙÙŠÙ‚ÙØ©ÙŒ", name: "á¹£adÄ«qa", korean: "ì¹œêµ¬(ì—¬)", roman: "á¹£adÄ«qa", kind: "ë‹¨ì–´", category: "family" }
    ];

    const wordCategories = [
      { id: "color", label: "ìƒ‰ê¹”" },
      { id: "weather", label: "ë‚ ì”¨" },
      { id: "fruit", label: "ê³¼ì¼" },
      { id: "vegetable", label: "ì•¼ì±„" },
      { id: "transport", label: "êµí†µìˆ˜ë‹¨" },
      { id: "animal", label: "ë™ë¬¼" },
      { id: "family", label: "ê°€ì¡±/ì‚¬ëŒ" },
      { id: "custom", label: "ì»¤ìŠ¤í…€" }
    ];

    let customWords = [];

    // === ë¬¸ì¥ ë°ì´í„° (50ë¬¸ì¥) ===
    const sentenceCategories = [
      { id: "greeting", label: "ì¸ì‚¬/ê¸°ë³¸" },
      { id: "feeling", label: "ê°ì •/ìƒíƒœ" },
      { id: "direction", label: "ê¸¸ ë¬»ê¸°" },
      { id: "shopping", label: "ì‡¼í•‘" },
      { id: "daily", label: "ì¼ìƒ" }
    ];

    const sentencesData = [
      // ì¸ì‚¬/ê¸°ë³¸ (10)
      { text: "Ù…ÙØ±Ù’Ø­ÙØ¨Ù‹Ø§!", korean: "ì•ˆë…•í•˜ì„¸ìš”!", category: "greeting" },
      { text: "Ø£ÙÙ‡Ù’Ù„Ù‹Ø§ ÙˆÙØ³ÙÙ‡Ù’Ù„Ù‹Ø§.", korean: "í™˜ì˜í•©ë‹ˆë‹¤.", category: "greeting" },
      { text: "Ø§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…Ù Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù’.", korean: "í‰ì•ˆì´ ìˆê¸°ë¥¼(ì•ˆë¶€ ì¸ì‚¬).", category: "greeting" },
      { text: "ÙƒÙÙŠÙ’ÙÙ Ø­ÙØ§Ù„ÙÙƒÙØŸ", korean: "ì–´ë–»ê²Œ ì§€ë‚´?", category: "greeting" },
      { text: "Ø£ÙÙ†ÙØ§ Ø¨ÙØ®ÙÙŠÙ’Ø±ÙØŒ Ø´ÙÙƒÙ’Ø±Ù‹Ø§.", korean: "ì €ëŠ” ì˜ ì§€ë‚´ìš”, ê³ ë§ˆì›Œìš”.", category: "greeting" },
      { text: "Ù…ÙØ§ Ø§Ø³Ù’Ù…ÙÙƒÙØŸ", korean: "ì´ë¦„ì´ ë­ì•¼?", category: "greeting" },
      { text: "Ø£ÙÙ†ÙØ§ Ø§ÙØ³Ù’Ù…ÙÙŠ Ø¬ÙÙŠÙ‡ÙÙˆÙ†.", korean: "ì œ ì´ë¦„ì€ ì§€í›ˆì´ì—ìš”.", category: "greeting" },
      { text: "Ù…ÙÙ†Ù’ Ø£ÙÙŠÙ’Ù†Ù Ø£ÙÙ†Ù’ØªÙØŸ", korean: "ì–´ë””ì—ì„œ ì™”ì–´?", category: "greeting" },
      { text: "Ø£ÙÙ†ÙØ§ Ù…ÙÙ†Ù’ ÙƒÙÙˆØ±ÙÙŠÙØ§.", korean: "ì €ëŠ” í•œêµ­ì—ì„œ ì™”ì–´ìš”.", category: "greeting" },
      { text: "ØªÙØ´ÙØ±Ù‘ÙÙÙ’ØªÙ Ø¨ÙÙ„ÙÙ‚ÙØ§Ø¦ÙÙƒÙ.", korean: "ë§Œë‚˜ì„œ ë°˜ê°€ì›Œìš”.", category: "greeting" },

      // ê°ì •/ìƒíƒœ (10)
      { text: "Ø£ÙÙ†ÙØ§ ØªÙØ¹Ù’Ø¨ÙØ§Ù†Ù Ù‚ÙÙ„ÙÙŠÙ„Ù‹Ø§.", korean: "ì €ëŠ” ì¡°ê¸ˆ í”¼ê³¤í•´ìš”.", category: "feeling" },
      { text: "Ø£ÙÙ†ÙØ§ Ù…ÙØ±ÙÙŠØ¶ÙŒ Ù‚ÙÙ„ÙÙŠÙ„Ù‹Ø§.", korean: "ì €ëŠ” ì¡°ê¸ˆ ì•„íŒŒìš”.", category: "feeling" },
      { text: "Ø£ÙÙ†ÙØ§ Ø¬ÙØ§Ø¦ÙØ¹ÙŒ.", korean: "ì €ëŠ” ë°°ê³ íŒŒìš”.", category: "feeling" },
      { text: "Ø£ÙÙ†ÙØ§ Ø¹ÙØ·Ù’Ø´ÙØ§Ù†Ù.", korean: "ì €ëŠ” ëª©ë§ë¼ìš”.", category: "feeling" },
      { text: "Ø£ÙÙ†ÙØ§ Ù…ÙØ´Ù’ØºÙÙˆÙ„ÙŒ Ø§Ù„ÙŠÙÙˆÙ’Ù…Ù.", korean: "ì €ëŠ” ì˜¤ëŠ˜ ë°”ë¹ ìš”.", category: "feeling" },
      { text: "Ø£ÙÙ†ÙØ§ Ù…ÙØ¨Ù’Ø³ÙÙˆØ·ÙŒ Ø¬ÙØ¯Ù‘Ù‹Ø§.", korean: "ì €ëŠ” ì •ë§ ê¸°ë»ìš”.", category: "feeling" },
      { text: "Ù„ÙØ§ Ø¨ÙØ£Ù’Ø³ÙØŒ Ø´ÙÙƒÙ’Ø±Ù‹Ø§.", korean: "ê´œì°®ì•„ìš”, ê³ ë§ˆì›Œìš”.", category: "feeling" },
      { text: "Ù„ÙØ§ Ø£ÙØ¯Ù’Ø±ÙÙŠ.", korean: "ì €ëŠ” ì˜ ëª¨ë¥´ê² ì–´ìš”.", category: "feeling" },
      { text: "Ù„ÙØ§ Ø£ÙÙÙ’Ù‡ÙÙ…Ù.", korean: "ì´í•´í•˜ì§€ ëª»í–ˆì–´ìš”.", category: "feeling" },
      { text: "Ù…ÙÙ…Ù’ÙƒÙÙ†Ù’ ØªÙØ¹ÙÙŠØ¯Ù Ù…ÙÙ†Ù’ ÙÙØ¶Ù’Ù„ÙÙƒÙØŸ", korean: "ë‹¤ì‹œ ë§í•´ ì¤„ ìˆ˜ ìˆì–´?", category: "feeling" },

      // ê¸¸ ë¬»ê¸° (10)
      { text: "Ø£ÙÙŠÙ’Ù†Ù Ø§Ù„Ø­ÙÙ…Ù‘ÙØ§Ù…ÙØŸ", korean: "í™”ì¥ì‹¤ì´ ì–´ë””ì˜ˆìš”?", category: "direction" },
      { text: "Ø£ÙÙŠÙ’Ù†Ù Ø§Ù„Ù…ÙØ·Ù’Ø¹ÙÙ…ÙØŸ", korean: "ì‹ë‹¹ì´ ì–´ë””ì˜ˆìš”?", category: "direction" },
      { text: "Ø£ÙÙŠÙ’Ù†Ù Ø§Ù„Ù…ÙØªÙ’Ø±ÙÙˆØŸ", korean: "ì§€í•˜ì² ì€ ì–´ë””ì˜ˆìš”?", category: "direction" },
      { text: "Ø£ÙÙŠÙ’Ù†Ù Ø§Ù„Ù…ÙØ®Ù’Ø±ÙØ¬ÙØŸ", korean: "ì¶œêµ¬ê°€ ì–´ë””ì˜ˆìš”?", category: "direction" },
      { text: "Ù‡ÙÙ„Ù’ Ù‡ÙÙˆÙ Ù‚ÙØ±ÙÙŠØ¨ÙŒØŸ", korean: "ê·¸ê²ƒì€ ê°€ê¹Œì›Œìš”?", category: "direction" },
      { text: "Ø£ÙØ±ÙÙŠØ¯Ù Ø£ÙÙ†Ù’ Ø£ÙØ°Ù’Ù‡ÙØ¨Ù Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù…ÙÙˆÙ’Ù„Ù.", korean: "ì‡¼í•‘ëª°ì— ê°€ê³  ì‹¶ì–´ìš”.", category: "direction" },
      { text: "Ù‡ÙÙ„Ù’ ÙŠÙÙ…Ù’ÙƒÙÙ†ÙÙƒÙ Ù…ÙØ³ÙØ§Ø¹ÙØ¯ÙØªÙÙŠØŸ", korean: "ì €ë¥¼ ë„ì™€ì¤„ ìˆ˜ ìˆì–´ìš”?", category: "direction" },
      { text: "Ù„ÙÙˆÙ’ Ø³ÙÙ…ÙØ­Ù’ØªÙØŒ Ø£ÙÙ†ÙØ§ Ø³ÙØ§Ø¦ÙØ­ÙŒ.", korean: "ì‹¤ë¡€í•©ë‹ˆë‹¤, ì €ëŠ” ê´€ê´‘ê°ì´ì—ìš”.", category: "direction" },
      { text: "Ù…ÙÙ†Ù’ ÙÙØ¶Ù’Ù„ÙÙƒÙØŒ ÙƒÙÙŠÙ’ÙÙ Ø£ÙØ°Ù’Ù‡ÙØ¨Ù Ø¥ÙÙ„ÙÙ‰ Ù‡ÙÙ†ÙØ§ÙƒÙØŸ", korean: "ì €ê¸°ë¡œ ì–´ë–»ê²Œ ê°€ë‚˜ìš”?", category: "direction" },
      { text: "Ù‡ÙÙ„Ù’ Ù‡ÙØ°ÙØ§ Ø§Ù„Ø·ÙÙ‘Ø±ÙÙŠÙ‚Ù ØµÙØ­ÙÙŠØ­ÙŒØŸ", korean: "ì´ ê¸¸ì´ ë§ë‚˜ìš”?", category: "direction" },

      // ì‡¼í•‘ (10)
      { text: "ÙƒÙÙ…Ù Ø§Ù„Ø³ÙÙ‘Ø¹Ù’Ø±ÙØŸ", korean: "ê°€ê²©ì´ ì–¼ë§ˆì˜ˆìš”?", category: "shopping" },
      { text: "ØºÙØ§Ù„ÙÙŠ Ø¬ÙØ¯Ù‘Ù‹Ø§.", korean: "ë„ˆë¬´ ë¹„ì‹¸ìš”.", category: "shopping" },
      { text: "Ù‡ÙÙ„Ù’ Ù„ÙØ¯ÙÙŠÙ’ÙƒÙ Ø®ÙØµÙ’Ù…ÙŒØŸ", korean: "í• ì¸ ìˆë‚˜ìš”?", category: "shopping" },
      { text: "Ø£ÙØ±ÙÙŠØ¯Ù Ù‡ÙØ°ÙØ§.", korean: "ì´ê±° ì‚¬ê³  ì‹¶ì–´ìš”.", category: "shopping" },
      { text: "Ù„ÙØ§ Ø£ÙØ±ÙÙŠØ¯Ù. Ø´ÙÙƒÙ’Ø±Ù‹Ø§.", korean: "ê´œì°®ì•„ìš”, í•„ìš” ì—†ì–´ìš”.", category: "shopping" },
      { text: "Ù‡ÙÙ„Ù’ ÙŠÙÙˆÙ’Ø¬ÙØ¯Ù Ù…ÙÙ‚ÙØ§Ø³ÙŒ Ø¢Ø®ÙØ±ÙØŸ", korean: "ë‹¤ë¥¸ ì‚¬ì´ì¦ˆê°€ ìˆë‚˜ìš”?", category: "shopping" },
      { text: "Ø£ÙØ±ÙÙŠØ¯Ù Ù†ÙÙÙ’Ø³Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø¡Ù Ø¨ÙÙ„ÙÙˆÙ’Ù†Ù Ø¢Ø®ÙØ±Ù.", korean: "ê°™ì€ ìƒí’ˆì„ ë‹¤ë¥¸ ìƒ‰ìœ¼ë¡œ ì›í•´ìš”.", category: "shopping" },
      { text: "Ù‡ÙÙ„Ù’ ØªÙÙ‚Ù’Ø¨ÙÙ„ÙÙˆÙ†Ù Ø§Ù„Ø¨ÙØ·ÙØ§Ù‚ÙØ©ÙØŸ", korean: "ì¹´ë“œ ê²°ì œ ë˜ë‚˜ìš”?", category: "shopping" },
      { text: "Ø£ÙÙŠÙ’Ù†Ù Ø§Ù„ØµÙÙ‘Ù†Ù’Ø¯ÙÙˆÙ‚ÙØŸ", korean: "ê³„ì‚°ëŒ€ê°€ ì–´ë””ì˜ˆìš”?", category: "shopping" },
      { text: "Ø´ÙÙƒÙ’Ø±Ù‹Ø§ Ø¹ÙÙ„ÙÙ‰ Ø®ÙØ¯Ù’Ù…ÙØªÙÙƒÙÙ…Ù’.", korean: "ì‘ëŒ€í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.", category: "shopping" },

      // ì¼ìƒ (10)
      { text: "Ù…ÙØ§Ø°ÙØ§ ØªÙÙÙ’Ø¹ÙÙ„Ù Ø§Ù„ÙŠÙÙˆÙ’Ù…ÙØŸ", korean: "ì˜¤ëŠ˜ ë­ í•  ê±°ì•¼?", category: "daily" },
      { text: "Ø£ÙÙ†ÙØ§ Ø°ÙØ§Ù‡ÙØ¨ÙŒ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ø¬ÙØ§Ù…ÙØ¹ÙØ©Ù.", korean: "ë‚˜ ì˜¤ëŠ˜ ëŒ€í•™êµì— ê°€.", category: "daily" },
      { text: "Ø£ÙÙ†ÙØ§ Ø£ÙØ¯Ù’Ø±ÙØ³Ù Ø§Ù„Ø¹ÙØ±ÙØ¨ÙÙŠÙÙ‘Ø©Ù.", korean: "ë‚˜ëŠ” ì•„ëì–´ë¥¼ ê³µë¶€í•˜ê³  ìˆì–´.", category: "daily" },
      { text: "Ø£ÙÙ†ÙØ§ Ø£ÙØ­ÙØ¨ÙÙ‘ Ø§Ù„Ù‚ÙÙ‡Ù’ÙˆÙØ©Ù.", korean: "ë‚˜ëŠ” ì»¤í”¼ë¥¼ ì¢‹ì•„í•´.", category: "daily" },
      { text: "Ø£ÙØ±ÙÙŠØ¯Ù Ù‚ÙÙ‡Ù’ÙˆÙØ©Ù‹ Ù…ÙÙ†Ù’ ÙÙØ¶Ù’Ù„ÙÙƒÙ.", korean: "ì»¤í”¼ í•œ ì” ì£¼ì„¸ìš”.", category: "daily" },
      { text: "Ø§Ù„Ø·ÙÙ‘Ù‚Ù’Ø³Ù Ø¬ÙÙ…ÙÙŠÙ„ÙŒ Ø§Ù„ÙŠÙÙˆÙ’Ù…Ù.", korean: "ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì¢‹ì•„.", category: "daily" },
      { text: "Ø§Ù„Ø¬ÙÙˆÙÙ‘ Ø­ÙØ§Ø±ÙŒÙ‘ Ø¬ÙØ¯Ù‘Ù‹Ø§.", korean: "ë‚ ì”¨ê°€ ë„ˆë¬´ ë”ì›Œ.", category: "daily" },
      { text: "Ø§Ù„Ø¬ÙÙˆÙÙ‘ Ø¨ÙØ§Ø±ÙØ¯ÙŒ Ø§Ù„ÙŠÙÙˆÙ’Ù…Ù.", korean: "ì˜¤ëŠ˜ì€ ë‚ ì”¨ê°€ ì¶”ì›Œ.", category: "daily" },
      { text: "Ù‡ÙÙ„Ù’ Ø¹ÙÙ†Ù’Ø¯ÙÙƒÙ ÙˆÙÙ‚Ù’ØªÙŒ Ù‚ÙÙ„ÙÙŠÙ„ÙŒØŸ", korean: "ì ê¹ ì‹œê°„ ìˆì–´?", category: "daily" },
      { text: "Ø£ÙØ±ÙØ§ÙƒÙ Ù„ÙØ§Ø­ÙÙ‚Ù‹Ø§!", korean: "ë‚˜ì¤‘ì— ë˜ ë³´ì!", category: "daily" }
    ];

    // ====== ìƒíƒœ ë³€ìˆ˜ ======
    let currentTab = "letters";
    let currentCategoryWord = "color";
    let currentCategorySentence = "greeting";
    let currentTraceText = "";
    let currentSentence = null;

    let traceCanvas, drawCanvas;
    let mediaRecorder = null;
    let recordedChunks = [];
    let lastAudioUrl = null;

    // ì „ì—­ ê·¸ë¦¬ê¸° ìƒíƒœ (ë‘ ìº”ë²„ìŠ¤ì—ì„œ ê³µìœ í•˜ì§€ë§Œ ë™ì‹œì— ì“°ì§„ ì•Šìœ¼ë‹ˆ ê´œì°®ìŒ)
    let isDrawing = false;
    let lastX = 0, lastY = 0;

    // ====== ì´ˆê¸°í™” ======
    document.addEventListener("DOMContentLoaded", () => {
      traceCanvas = document.getElementById("traceCanvas");
      drawCanvas = document.getElementById("drawCanvas");

      initLetters();
      initVowels();
      initWordCategories();
      renderWordList();
      initSentenceCategories();
      renderSentenceList();

      setupCanvasDrawing(traceCanvas); // ë”°ë¼ì“°ê¸° ìº”ë²„ìŠ¤ì—ì„œë„ ê¸€ì”¨ ì‘ì„± ê°€ëŠ¥
      setupCanvasDrawing(drawCanvas);  // ììœ  ì“°ê¸° ìº”ë²„ìŠ¤

      resizeAllCanvases();

      window.addEventListener("resize", () => {
        resizeAllCanvases();
        if (currentTraceText) {
          drawTraceSample(currentTraceText);
        }
      });
    });

    // ====== íƒ­ ì „í™˜ ======
   function setTab(tab) {
  currentTab = tab;

  // ìƒë‹¨ íƒ­ í™œì„±í™”
  document.querySelectorAll(".nav-tab").forEach((btn) => {
    btn.classList.toggle("active", btn.dataset.tab === tab);
  });

  // ì™¼ìª½ íŒ¨ë„ í‘œì‹œ/ìˆ¨ê¸°ê¸°
  document.getElementById("panel-letters").classList.toggle("hidden", tab !== "letters");
  document.getElementById("panel-vowels").classList.toggle("hidden", tab !== "vowels");
  document.getElementById("panel-words").classList.toggle("hidden", tab !== "words");
  document.getElementById("panel-sentences").classList.toggle("hidden", tab !== "sentences");

  // ë¬¸ì¥ ë°•ìŠ¤ & ë…¹ìŒ íŒ¨ë„ ì²˜ë¦¬
  const recordPanel = document.getElementById("recordPanel");
  const sentenceBox = document.getElementById("sentencePracticeBox");

  if (tab === "sentences") {
    recordPanel.classList.remove("hidden");
    if (currentSentence) {
      sentenceBox.classList.remove("hidden");
    }
  } else {
    // ë‹¤ë¥¸ íƒ­ì—ì„  ë¬¸ì¥ ë°•ìŠ¤, ë…¹ìŒ íŒ¨ë„ ëª¨ë‘ ìˆ¨ê¹€
    recordPanel.classList.add("hidden");
    sentenceBox.classList.add("hidden");
  }
}


    // ====== ììŒ/ëª¨ìŒ ì´ˆê¸°í™” ======
   function initLetters() {
  const container = document.getElementById("lettersList");
  container.innerHTML = "";
  consonants.forEach((letter) => {
    const div = document.createElement("div");
    div.className = "list-item";

    const big = document.createElement("div");
    big.className = "letter-card-letter";
    big.textContent = letter.char;

    const nameLine = document.createElement("div");
    nameLine.className = "letter-card-sub";
    nameLine.textContent = letter.name;

    const soundLine = document.createElement("div");
    soundLine.className = "letter-card-sub";
    soundLine.textContent = letter.sound;

    div.appendChild(big);
    div.appendChild(nameLine);
    div.appendChild(soundLine);

   div.onclick = () => {
  // label: "ììŒ ì—°ìŠµ", extra: "alif Â· ë°œìŒ: a / Ä" ì´ëŸ° ëŠë‚Œ
  const extra = `${letter.name} Â· ë°œìŒ: ${letter.sound}`;
  setTraceText(letter.char, "ììŒ ì—°ìŠµ", extra);
  speakArabic(letter.char);
};


    container.appendChild(div);
  });
}

    function initVowels() {
      const container = document.getElementById("vowelsList");
      container.innerHTML = "";
      vowels.forEach((v) => {
        const div = document.createElement("div");
        div.className = "list-item small-text";
        div.textContent = v.mark;
        div.title = v.name + " - " + v.desc;
        div.onclick = () => {
          setTraceText(v.mark, "ëª¨ìŒ " + v.name);
          speakArabic(v.mark);
        };
        container.appendChild(div);
      });
    }

    // ====== ë‹¨ì–´ ì˜ì—­ ======
    function initWordCategories() {
      const wrap = document.getElementById("wordCategoryChips");
      wrap.innerHTML = "";
      wordCategories.forEach((cat) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "chip" + (cat.id === currentCategoryWord ? " active" : "");
        btn.textContent = cat.label;
        btn.onclick = () => {
          currentCategoryWord = cat.id;
          document
            .querySelectorAll("#wordCategoryChips .chip")
            .forEach((c) => c.classList.remove("active"));
          btn.classList.add("active");
          renderWordList();
        };
        wrap.appendChild(btn);
      });
    }

    function renderWordList() {
      const list = document.getElementById("wordList");
      list.innerHTML = "";
      const all = [...baseWords, ...customWords];
      const filtered = all.filter((w) => w.category === currentCategoryWord);
      if (filtered.length === 0) {
        const empty = document.createElement("p");
        empty.className = "small-label";
        empty.textContent =
          currentCategoryWord === "custom"
            ? "ì•„ì§ ì¶”ê°€í•œ ë‹¨ì–´ê°€ ì—†ì–´ìš”."
            : "ì´ ì¹´í…Œê³ ë¦¬ì˜ ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.";
        list.appendChild(empty);
        return;
      }
      filtered.forEach((w) => {
        const card = document.createElement("div");
        card.className = "word-card";
        card.onclick = () => {
          setTraceText(w.letter, "ë‹¨ì–´: " + (w.korean ?? ""));
          speakArabic(w.letter);
        };

        const row = document.createElement("div");
        row.className = "word-main-row";

        const arSpan = document.createElement("div");
        arSpan.className = "word-ar";
        arSpan.textContent = w.letter;

        const koSpan = document.createElement("div");
        koSpan.style.fontSize = "0.8rem";
        koSpan.textContent = w.korean ?? "";

        row.appendChild(arSpan);
        row.appendChild(koSpan);

        const meta = document.createElement("div");
        meta.className = "word-meta";
        if (w.roman) {
          const r = document.createElement("span");
          r.textContent = w.roman;
          meta.appendChild(r);
        }
        const cat = document.createElement("span");
        cat.textContent =
          wordCategories.find((c) => c.id === w.category)?.label ?? "";
        meta.appendChild(cat);

        card.appendChild(row);
        card.appendChild(meta);
        list.appendChild(card);
      });
    }

    function addCustomWord() {
      const ar = document.getElementById("customWordArabic").value.trim();
      const ko = document.getElementById("customWordKorean").value.trim();
      const ro = document.getElementById("customWordRoman").value.trim();
      if (!ar || !ko) {
        alert("ì•„ëì–´ ë‹¨ì–´ì™€ í•œêµ­ì–´ ëœ»ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        return;
      }
      const word = {
        letter: ar,
        korean: ko,
        roman: ro,
        name: ro || ko,
        kind: "ë‹¨ì–´",
        category: "custom"
      };
      customWords.push(word);
      document.getElementById("customWordArabic").value = "";
      document.getElementById("customWordKorean").value = "";
      document.getElementById("customWordRoman").value = "";

      if (currentCategoryWord !== "custom") {
        currentCategoryWord = "custom";
        document
          .querySelectorAll("#wordCategoryChips .chip")
          .forEach((c) => c.classList.remove("active"));
        const customChip = Array.from(
          document.querySelectorAll("#wordCategoryChips .chip")
        ).find((c) => c.textContent.includes("ì»¤ìŠ¤í…€"));
        if (customChip) customChip.classList.add("active");
      }
      renderWordList();
    }

    // ====== ë¬¸ì¥ ì˜ì—­ ======
    function initSentenceCategories() {
      const wrap = document.getElementById("sentenceCategoryChips");
      wrap.innerHTML = "";
      sentenceCategories.forEach((cat) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className =
          "chip" + (cat.id === currentCategorySentence ? " active" : "");
        btn.textContent = cat.label;
        btn.onclick = () => {
          currentCategorySentence = cat.id;
          document
            .querySelectorAll("#sentenceCategoryChips .chip")
            .forEach((c) => c.classList.remove("active"));
          btn.classList.add("active");
          renderSentenceList();
        };
        wrap.appendChild(btn);
      });
    }

    function renderSentenceList() {
      const list = document.getElementById("sentenceList");
      list.innerHTML = "";
      const filtered = sentencesData.filter(
        (s) => s.category === currentCategorySentence
      );
      if (filtered.length === 0) {
        const p = document.createElement("p");
        p.className = "small-label";
        p.textContent = "ì´ ì¹´í…Œê³ ë¦¬ì— ë¬¸ì¥ì´ ì—†ìŠµë‹ˆë‹¤.";
        list.appendChild(p);
        return;
      }
      filtered.forEach((s) => {
        const card = document.createElement("div");
        card.className = "sentence-card";
        card.onclick = () => {
          selectSentence(s);
        };
        const ar = document.createElement("div");
        ar.className = "sentence-ar";
        ar.textContent = s.text;
        const kr = document.createElement("div");
        kr.className = "sentence-kr";
        kr.textContent = s.korean;
        card.appendChild(ar);
        card.appendChild(kr);
        list.appendChild(card);
      });
    }

    function selectSentence(s) {
      currentSentence = s;
      const box = document.getElementById("sentencePracticeBox");
      const ar = document.getElementById("practiceSentenceAr");
      const kr = document.getElementById("practiceSentenceKr");
      box.classList.remove("hidden");
      ar.textContent = s.text;
      kr.textContent = s.korean;
      setTraceText(s.text, "ë¬¸ì¥ ì—°ìŠµ");
      document.getElementById("recordPanel").classList.remove("hidden");
    }

    function playCurrentSentence() {
      if (!currentSentence) return;
      speakArabic(currentSentence.text);
    }

    function scrollToTraceCanvas() {
      if (!traceCanvas) return;
      traceCanvas.scrollIntoView({ behavior: "smooth", block: "center" });
    }

    // ====== TTS ======
    function speakArabic(text) {
      if (!("speechSynthesis" in window)) {
        alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ë°œìŒ ì¬ìƒì„ ì§€ì›í•˜ì§€ ì•Šì•„ìš”.");
        return;
      }
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = "ar-SA";
      utter.rate = 1;
      utter.pitch = 1;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utter);
    }

    // ====== ìº”ë²„ìŠ¤ ê´€ë ¨ ======
    function resizeCanvasElement(canvas) {
      const rect = canvas.getBoundingClientRect();
      const dpr = window.devicePixelRatio || 1;
      canvas.width = rect.width * dpr;
      canvas.height = rect.height * dpr;
      const ctx = canvas.getContext("2d");
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      ctx.clearRect(0, 0, rect.width, rect.height);
    }

    function resizeAllCanvases() {
      if (!traceCanvas || !drawCanvas) return;
      resizeCanvasElement(traceCanvas);
      resizeCanvasElement(drawCanvas);
    }

   // text: ë”°ë¼ ì“¸ ì•„ëì–´, label: ì–´ë–¤ ì—°ìŠµì¸ì§€(ììŒ/ë‹¨ì–´/ë¬¸ì¥ ë“±), extra: ëœ»/ë°œìŒ
function setTraceText(text, label = "", extra = "") {
  currentTraceText = text || "";

  // ===== ì„ íƒ ì •ë³´ ë°•ìŠ¤ ì—…ë°ì´íŠ¸ =====
  const typeEl = document.getElementById("selectedType");
  const arEl   = document.getElementById("selectedArabic");
  const extraEl = document.getElementById("selectedExtra");

  if (currentTraceText) {
    typeEl.textContent  = label || "ì—°ìŠµ ì¤‘ì¸ í•­ëª©";
    arEl.textContent    = currentTraceText;
    extraEl.textContent = extra || "";
  } else {
    typeEl.textContent  = "ì—°ìŠµí•  ììŒ / ëª¨ìŒ / ë‹¨ì–´ / ë¬¸ì¥ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.";
    arEl.textContent    = "";
    extraEl.textContent = "";
  }

  // ===== ë”°ë¼ì“°ê¸° ìº”ë²„ìŠ¤ì— íë¦¿í•œ ê¸€ì ê·¸ë¦¬ê¸° (ê¸°ì¡´ ë¡œì§) =====
  const ctx = traceCanvas.getContext("2d");
  ctx.clearRect(0, 0, traceCanvas.width, traceCanvas.height);
  if (!currentTraceText) return;

  ctx.save();
  ctx.globalAlpha = 0.06;
  ctx.fillStyle = "#111827";
  ctx.font = "160px 'Noto Naskh Arabic', 'Scheherazade', system-ui, sans-serif";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";

  const x = traceCanvas.width / 2;
  const y = traceCanvas.height / 2;
  ctx.direction = "rtl";
  ctx.fillText(currentTraceText, x + 150, y); // ê¸°ì¡´ì— ì“°ë˜ ìœ„ì¹˜ ê·¸ëŒ€ë¡œ
  ctx.restore();
}

    function drawTraceSample(text) {
      if (!traceCanvas) return;
      const ctx = traceCanvas.getContext("2d");
      const rect = traceCanvas.getBoundingClientRect();
      ctx.clearRect(0, 0, rect.width, rect.height);

      if (!text) return;

      ctx.save();
      ctx.fillStyle = "rgba(0, 0, 0, 0.06)";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.direction = "rtl";

      const maxWidth = rect.width * 0.8;
      const base = Math.min(rect.width, rect.height);
      let fontSize = base * 0.5;
      if (fontSize < 20) fontSize = 20;

      ctx.font =
        fontSize +
        "px 'Noto Naskh Arabic', 'Scheherazade New', 'Amiri', 'Times New Roman', serif";

      let width = ctx.measureText(text).width;
      while (width > maxWidth && fontSize > 18) {
        fontSize -= 2;
        ctx.font =
          fontSize +
          "px 'Noto Naskh Arabic', 'Scheherazade New', 'Amiri', 'Times New Roman', serif";
        width = ctx.measureText(text).width;
      }

      ctx.fillText(text, rect.width / 2, rect.height / 2);
      ctx.restore();
    }

    // ë‘ ìº”ë²„ìŠ¤ ëª¨ë‘ì—ì„œ ì“¸ ìˆ˜ ìˆë„ë¡ ê³µìš© ê·¸ë¦¬ê¸° í•¨ìˆ˜
    function setupCanvasDrawing(c) {
      if (!c) return;
      const ctx = c.getContext("2d");

      const getPos = (e) => {
        const rect = c.getBoundingClientRect();
        if (e.touches && e.touches[0]) {
          return {
            x: e.touches[0].clientX - rect.left,
            y: e.touches[0].clientY - rect.top
          };
        }
        return { x: e.clientX - rect.left, y: e.clientY - rect.top };
      };

      const start = (e) => {
        e.preventDefault();
        isDrawing = true;
        const pos = getPos(e);
        lastX = pos.x;
        lastY = pos.y;
      };

      const move = (e) => {
        if (!isDrawing) return;
        e.preventDefault();
        const pos = getPos(e);
        ctx.lineWidth = 3;
        ctx.lineCap = "round";
        ctx.strokeStyle = "#111827";
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
        lastX = pos.x;
        lastY = pos.y;
      };

      const end = () => {
        isDrawing = false;
      };

      c.addEventListener("mousedown", start);
      c.addEventListener("mousemove", move);
      window.addEventListener("mouseup", end);

      c.addEventListener("touchstart", start, { passive: false });
      c.addEventListener("touchmove", move, { passive: false });
      window.addEventListener("touchend", end);
      window.addEventListener("touchcancel", end);
    }

    function clearDrawCanvas() {
      if (!drawCanvas) return;
      const ctx = drawCanvas.getContext("2d");
      const rect = drawCanvas.getBoundingClientRect();
      ctx.clearRect(0, 0, rect.width, rect.height);
    }

    // ====== ë…¹ìŒ ê¸°ëŠ¥ ======
    async function startRecording() {
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ë…¹ìŒì„ ì§€ì›í•˜ì§€ ì•Šì•„ìš”.");
        return;
      }
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        recordedChunks = [];
        mediaRecorder = new MediaRecorder(stream);

        mediaRecorder.ondataavailable = (e) => {
          if (e.data.size > 0) {
            recordedChunks.push(e.data);
          }
        };

        mediaRecorder.onstop = () => {
          const blob = new Blob(recordedChunks, { type: "audio/webm" });
          if (lastAudioUrl) {
            URL.revokeObjectURL(lastAudioUrl);
          }
          lastAudioUrl = URL.createObjectURL(blob);
          const audio = document.getElementById("myPronunciationAudio");
          audio.src = lastAudioUrl;
        };

        mediaRecorder.start();
      } catch (err) {
        console.error(err);
        alert("ë§ˆì´í¬ ì‚¬ìš©ì´ í—ˆìš©ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
      }
    }

    function stopRecording() {
      if (mediaRecorder && mediaRecorder.state === "recording") {
        mediaRecorder.stop();
      }
    }
  </script>
</body>
</html>
